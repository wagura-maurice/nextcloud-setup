[restore]
# ===== General Settings =====
# Default restore location for backup files
restore_path = "/var/backups/nextcloud"

# What to restore (options: all, files, database, config)
restore_scope = "all"

# Whether to verify backups before restoration
verify_backups = true

# Keep extracted backup files after restoration (useful for debugging)
keep_extracted = false

# Log file for restore operations
log_file = "/var/log/nextcloud/restore-$(date +%Y%m%d).log"

# Maximum log file size in MB before rotation
max_log_size = 10

# Number of log files to keep
log_backup_count = 5

# ===== Database Restoration =====
[database]
# Drop existing database tables before restoration
# WARNING: This will delete all existing data in the database
drop_tables_before_restore = false

# Database connection parameters (if not using Nextcloud config)
# If empty, will be extracted from Nextcloud config
host = ""
user = ""
password = ""
dbname = ""

# Maximum allowed packet size for database import (in MB)
max_allowed_packet = 128

# ===== File Restoration =====
[files]
# Preserve file permissions and ownership
preserve_permissions = true

# What to do if files already exist (options: skip, backup, overwrite)
on_conflict = "backup"

# Directory to store backups of overwritten files
backup_dir = "/var/backups/nextcloud/restore_backups"

# File patterns to exclude from restoration (space-separated)
exclude_patterns = "*.log *.tmp temp/* cache/*"

# ===== Nextcloud Specific =====
[nextcloud]
# Path to Nextcloud installation
nextcloud_path = "/var/www/nextcloud"

# PHP path
php_path = "/usr/bin/php"

# Web server user (for setting correct permissions)
web_user = "www-data"
web_group = "www-data"

# ===== Pre/Post Hooks =====
[hooks]
# Script to run before starting restoration (leave empty to disable)
pre_restore_script = ""

# Script to run after successful restoration (leave empty to disable)
post_restore_script = ""

# Timeout for hooks in seconds
hook_timeout = 300

# ===== Notification Settings =====
[notifications]
# Enable email notifications (true/false)
enable_email = false
email_recipient = "admin@example.com"
email_subject = "Nextcloud Restore Notification"

# Enable system notifications (true/false)
enable_system_notification = true

# ===== Performance =====
[performance]
# Number of parallel processes for file restoration
parallel_processes = 4

# Buffer size for file operations (in KB)
buffer_size = 4096

# ===== Security =====
[security]
# Verify backup signatures (if available)
verify_signatures = true

# Maximum allowed age of backup (in days)
# 0 = no limit
max_backup_age = 30

# Require confirmation before starting restoration
require_confirmation = true

# ===== Cloudflare R2 Integration =====
[cloudflare]
# Enable Cloudflare R2 integration
enabled = false

# Cloudflare R2 credentials
account_id = ""
access_key_id = ""
secret_access_key = ""

# Bucket name
bucket = ""

# Region (use 'auto' for automatic selection)
region = "auto"

# ===== Local Backup =====
[local]
# Enable local backup of current state before restoration
backup_before_restore = true

# Directory to store local backups
backup_dir = "/var/backups/nextcloud/pre_restore"

# Number of local backups to keep
keep_backups = 3

# ===== Logging =====
[logging]
# Log level (debug, info, warning, error, critical)
log_level = "info"

# Log to syslog (true/false)
syslog_enabled = true

# Log to file (true/false)
file_enabled = true

# Log to console (true/false)
console_enabled = true
