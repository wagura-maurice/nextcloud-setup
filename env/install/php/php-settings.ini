; Nextcloud PHP Configuration
; This file contains optimized PHP settings for Nextcloud

[PHP]

; Maximum execution time of each script, in seconds
max_execution_time = 3600

; Maximum amount of time each script may spend parsing request data
max_input_time = 3600

; Maximum amount of memory a script may consume
memory_limit = 1G

; Maximum size of POST data that PHP will accept
post_max_size = 10G

; Maximum allowed size for uploaded files
upload_max_filesize = 10G

; Maximum number of files that can be uploaded via a single request
max_file_uploads = 200

; Whether to allow HTTP file uploads
file_uploads = On

; Temporary directory for HTTP uploaded files
upload_tmp_dir = /var/www/nextcloud/tmp

; Maximum size of POST data that PHP will accept
post_max_size = 10G

; Default timeout for socket based streams (seconds)
default_socket_timeout = 3600

[Date]
; Defines the default timezone used by the date functions
date.timezone = UTC

[opcache]
; Determines if Zend OPCache is enabled
opcache.enable = 1

; The OPcache shared memory storage size in megabytes
opcache.memory_consumption = 256

; The amount of memory for interned strings in Mbytes
opcache.interned_strings_buffer = 32

; The maximum number of keys (scripts) in the OPcache hash table
opcache.max_accelerated_files = 10000

; How often to check script timestamps for updates, in seconds
opcache.revalidate_freq = 1

; If enabled, OPcache appends the current working directory to the script key
opcache.revalidate_path = 1

; If enabled, a fast shutdown sequence is used
opcache.fast_shutdown = 1

; Enables the OPcache for the CLI version of PHP
opcache.enable_cli = 1

; The maximum percentage of "wasted" memory until a restart is scheduled
opcache.max_wasted_percentage = 5

; Prevents caching files larger than this size (in bytes)
opcache.max_file_size = 0

[Session]
; Handler used to store/retrieve data
session.save_handler = redis

; Connection string for session storage
session.save_path = "tcp://127.0.0.1:6379"

; Name of the session (used as cookie name)
session.name = PHPSESSID

; Lifetime in seconds of cookie or, if 0, until browser is restarted
session.cookie_lifetime = 0

; The path for which the cookie is valid
session.cookie_path = /nextcloud

; The domain for which the cookie is valid
; session.cookie_domain = example.com

; Whether to use strict session mode
session.use_strict_mode = 1

; Whether to use cookies
session.use_cookies = 1

; Whether to use only cookies for session ID management
session.use_only_cookies = 1

; Prevent session fixation
session.use_trans_sid = 0

; Session garbage collection
session.gc_probability = 1
session.gc_divisor = 1000
session.gc_maxlifetime = 1440

[mail function]
; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
sendmail_path = /usr/sbin/sendmail -t -i

[SQL]
; Valid range 0 - 2147483647.  Default = 60.
sql.safe_mode = Off

[ODBC]
; http://php.net/odbc.default-db
;odbc.default_db    =  Not yet implemented

; http://php.net/odbc.default-user
;odbc.default_user  =  Not yet implemented

; http://php.net/odbc.default-pw
;odbc.default_pw    =  Not yet implemented

; Controls the ODBC cursor model.
; Default: SQL_CURSOR_STATIC (default).
;odbc.default_cursortype

[MySQLi]
; Maximum number of persistent links.  -1 means no limit.
mysqli.max_persistent = -1

; Allow or prevent persistent links.
mysqli.allow_persistent = On

; Maximum number of links.  -1 means no limit.
mysqli.max_links = -1

; Default port number for mysqli_connect().  If unset, mysqli_connect() will use
; the $MYSQL_TCP_PORT or the mysql-tcp entry in /etc/services or the
; compile-time value defined MYSQL_PORT (in that order).
; http://php.net/mysqli.default-port
mysqli.default_port = 3306

; Default socket name for local MySQL connects.  If empty, uses the built-in
; MySQL defaults.
mysqli.default_socket =

; Default host for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-host
mysqli.default_host =

; Default user for mysql_connect() (doesn't apply in safe mode).
; http://php.net/mysqli.default-user
mysqli.default_user =

; Default password for mysqli_connect() (doesn't apply in safe mode).
; Note that this is generally a *bad* idea to store passwords in this file.
; http://php.net/mysqli.default-pw
mysqli.default_pw =

; Allow or prevent reconnect if the connection is lost.
mysqli.reconnect = Off

[PostgreSQL]
; Allow or prevent persistent links.
pgsql.allow_persistent = On

; Detect broken persistent links.
pgsql.auto_reset_persistent = Off

; Maximum number of persistent links.  -1 means no limit.
pgsql.max_persistent = -1

; Maximum number of links (persistent+non persistent).  -1 means no limit.
pgsql.max_links = -1

; Ignore PostgreSQL backends Notice message or not.
; http://php.net/pgsql.ignore-notice
pgsql.ignore_notice = 0

; Log PostgreSQL backends Notice message or not.
; http://php.net/pgsql.log-notice
pgsql.log_notice = 0
