# Nextcloud Installation Configuration

# System Configuration
NEXTCLOUD_VERSION="latest"
NEXTCLOUD_DIR="/var/www/nextcloud"
NEXTCLOUD_DATA_DIR="$NEXTCLOUD_DIR/data"
NEXTCLOUD_TMP_DIR="$NEXTCLOUD_DIR/tmp"
NEXTCLOUD_OPCACHE_DIR="$NEXTCLOUD_DIR/.opcache"

# Database Configuration
DB_TYPE="mysql"
DB_NAME="nextcloud"
DB_USER="nextcloud"
DB_PASS="passw@rd"
DB_HOST="127.0.0.1"
DB_PORT="3306"
DB_PREFIX="oc_"

# Nextcloud Admin User
ADMIN_USER="admin"
ADMIN_PASS="admin123"

# Web Server Configuration
WEB_SERVER_USER="www-data"
WEB_SERVER_GROUP="www-data"
APACHE_CONF_DIR="/etc/apache2/sites-available"
APACHE_CONF_FILE="nextcloud.conf"
APACHE_SSL_CONF_FILE="nextcloud-ssl.conf"

# PHP Configuration
PHP_VERSION="8.4"
PHP_INI_DIR="/etc/php/$PHP_VERSION"
PHP_FPM_POOL_DIR="$PHP_INI_DIR/fpm/pool.d"
PHP_FPM_SERVICE="php$PHP_VERSION-fpm"

# Redis Configuration
REDIS_SOCKET="/var/run/redis/redis.sock"
REDIS_PASS=""

# Domain Configuration
DOMAIN_NAME="cloud.e-granary.com"
NEXTCLOUD_URL="https://$DOMAIN_NAME"

# SSL Configuration
SSL_EMAIL="wagura465@gmail.com"
SSL_COUNTRY="KE"
SSL_STATE="Nairobi"
SSL_LOCALITY="Nairobi"
SSL_ORG="Wagura Maurice"
SSL_ORG_UNIT="IT"

# File and Directory Permissions
DIR_PERM=750
FILE_PERM=640

# Logging
LOG_DIR="/var/log/nextcloud"
APACHE_LOG_DIR="/var/log/apache2"
PHP_LOG_DIR="/var/log/php$PHP_VERSION"

# Resource Limits
PHP_MEMORY_LIMIT="512M"
PHP_UPLOAD_MAX="64M"
PHP_POST_MAX_SIZE="96M"
PHP_MAX_EXECUTION_TIME="600"
PHP_MAX_INPUT_TIME="300"
PHP_MAX_INPUT_VARS="3000"

# OPcache Settings
OPCACHE_MEMORY_CONSUMPTION="128"
OPCACHE_INTERNED_STRINGS_BUFFER="16"
OPCACHE_MAX_ACCELERATED_FILES="10000"
OPCACHE_REVALIDATE_FREQ="60"

# PHP-FPM Settings
PM_MAX_CHILDREN="64"
PM_START_SERVERS="16"
PM_MIN_SPARE_SERVERS="16"
PM_MAX_SPARE_SERVERS="32"
PM_MAX_REQUESTS="500"

# Trusted Domains (space-separated)
TRUSTED_DOMAINS=(
    "localhost"
    "$DOMAIN_NAME"
    "$(hostname)"
    "$(hostname -f)"
    "$(hostname -I | awk '{print $1}')"
)
